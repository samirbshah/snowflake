--USE ROLE ACCOUNTADMIN; 
--create   ROLE USER_SUPPORT; 
--GRANT MANAGE USER SUPPORT CASES ON ACCOUNT TO ROLE USER_SUPPORT; 

USE ROLE ACCOUNTADMIN; 
CREATE ROLE USER_SUPPORT; 
GRANT MANAGE USER SUPPORT CASES ON ACCOUNT TO ROLE USER_SUPPORT; 
GRANT MANAGE ACCOUNT SUPPORT CASES ON ACCOUNT TO ROLE ACCOUNT_SUPPORT;
GRANT ROLE ORGANIZATION_SUPPORT TO USER SHAHS;


use role accountadmin;
 alter account set saml_identity_provider = '{
 "certificate": "MIIC8DCCAdigAwIBAgIQI71kyEv44LFCuX+ur6SUFzANBgkqhkiG9w0BAQsFADA0MTIwMAYDVQQDEylNaWNyb3NvZnQgQXp1cmUgRmVkZXJhdGVkIFNTTyBDZXJ0aWZpY2F0ZTAeFw0yMjAxMDYxODEyMzZaFw0yNTAxMDYxODEyMzZaMDQxMjAwBgNVBAMTKU1pY3Jvc29mdCBBenVyZSBGZWRlcmF0ZWQgU1NPIENlcnRpZmljYXRlMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA5lUEWiPW7yiMd5NRYvW25X0paNnUk9c01CCVIKppA2lrGEFVkHIyIzRPOq+XusoAfw5gAyKFPJE+lWJVL0hLjD3MdzwIfLydw/wraUFsghBKzBUj7shHk/BSWGusoQJ1IXgEqF9LG8YyBZhbqwbU01zSImIllCwcCKScgwBvlTy1sOu36n4KOI8lthgP6N/zTTv/8gVOnvAYN3UR+jFLR/CjsueRkCz1vGVzwUAo/ETEk3FdDcYr+BQoGImNjfGBkYBGke0tS9PenAiQHb6mvufZCaXUCDVXtYquOZ7cHQP03OXvwb6DCu16Vkfvfos4LCFQULYkaeHEcKHiXrOujQIDAQABMA0GCSqGSIb3DQEBCwUAA4IBAQCQVIp4chr2JETrfk7nu4lqOZPwb7CJLkCPdPNLOx7a9dRVGz1Tsyf5botJkfj7DFYeqTAe3z2Tlln3v/TziF/z0NCVLv0bDbbjviY1GZ7Fdv3Jx8ImEIj4UAvi+Pg3BVzxhLLUbrf5gkiUeEqmC3fvet9aOUri/ksC+ofTneMDvcFu9WVEb/fZXfYB1HLXKJ2gC5Rb5Ks6JS9REzmM15VidyLWevpOgRM8GhxqFmsXyTDsIFDewvmvm6UU44Y1GtIUrCONBm6lCZ1tenbhWAotjc/1snL/l0axUzMlyFcLYTZp5l7Z6WyWiIBkd5/KES7Ybk/zf8c6BrRikZGcex0p",
 "ssoUrl":"https://login.microsoftonline.com/2fdfac55-d106-4200-a60b-9ea11706fa32/saml2",
 "type":"custom",
 "label":"AzureAD"
 }';
 alter account set sso_login_page = TRUE;
 
 select t.value:type::varchar as type,
       t.value:host::varchar as host,
       t.value:port as port
from table(flatten(input => parse_json(system$whitelist()))) as t;

use role accountadmin;
drop SECURITY INTEGRATION AZUREADINTEGRATION;
CREATE  SECURITY INTEGRATION AZUREADINTEGRATION
TYPE = SAML2
ENABLED = TRUE
SAML2_ISSUER = 'https://sts.windows.net/2fdfac55-d106-4200-a60b-9ea11706fa32/' 
SAML2_SSO_URL = 'https://login.microsoftonline.com/2fdfac55-d106-4200-a60b-9ea11706fa32/saml2' 
SAML2_PROVIDER = 'CUSTOM'
SAML2_X509_CERT = 'MIIC8DCCAdigAwIBAgIQI71kyEv44LFCuX+ur6SUFzANBgkqhkiG9w0BAQsFADA0MTIwMAYDVQQDEylNaWNyb3NvZnQgQXp1cmUgRmVkZXJhdGVkIFNTTyBDZXJ0aWZpY2F0ZTAeFw0yMjAxMDYxODEyMzZaFw0yNTAxMDYxODEyMzZaMDQxMjAwBgNVBAMTKU1pY3Jvc29mdCBBenVyZSBGZWRlcmF0ZWQgU1NPIENlcnRpZmljYXRlMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA5lUEWiPW7yiMd5NRYvW25X0paNnUk9c01CCVIKppA2lrGEFVkHIyIzRPOq+XusoAfw5gAyKFPJE+lWJVL0hLjD3MdzwIfLydw/wraUFsghBKzBUj7shHk/BSWGusoQJ1IXgEqF9LG8YyBZhbqwbU01zSImIllCwcCKScgwBvlTy1sOu36n4KOI8lthgP6N/zTTv/8gVOnvAYN3UR+jFLR/CjsueRkCz1vGVzwUAo/ETEk3FdDcYr+BQoGImNjfGBkYBGke0tS9PenAiQHb6mvufZCaXUCDVXtYquOZ7cHQP03OXvwb6DCu16Vkfvfos4LCFQULYkaeHEcKHiXrOujQIDAQABMA0GCSqGSIb3DQEBCwUAA4IBAQCQVIp4chr2JETrfk7nu4lqOZPwb7CJLkCPdPNLOx7a9dRVGz1Tsyf5botJkfj7DFYeqTAe3z2Tlln3v/TziF/z0NCVLv0bDbbjviY1GZ7Fdv3Jx8ImEIj4UAvi+Pg3BVzxhLLUbrf5gkiUeEqmC3fvet9aOUri/ksC+ofTneMDvcFu9WVEb/fZXfYB1HLXKJ2gC5Rb5Ks6JS9REzmM15VidyLWevpOgRM8GhxqFmsXyTDsIFDewvmvm6UU44Y1GtIUrCONBm6lCZ1tenbhWAotjc/1snL/l0axUzMlyFcLYTZp5l7Z6WyWiIBkd5/KES7Ybk/zf8c6BrRikZGcex0p' 
SAML2_SP_INITIATED_LOGIN_PAGE_LABEL = 'AzureAD'
SAML2_ENABLE_SP_INITIATED = TRUE;

desc security integration AZUREADINTEGRATION;
show parameters like 'SAML_IDENTITY_PROVIDER' in account;

use role SecurityAdmin;
drop user Shahs;
CREATE or replace USER ShahS PASSWORD = '' LOGIN_NAME = 'ShahS@uslbm.us' DISPLAY_NAME = 'Samir Shah' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER ShahS;

 
use role SecurityAdmin;
--drop user SankarA;
--CREATE or replace USER SankarA PASSWORD = '' LOGIN_NAME = 'SankarA@uslbm.us' DISPLAY_NAME = 'Ananda Sankaran' DEFAULT_ROLE = SYSADMIN ;
CREATE or replace USER ASAdmin9920 PASSWORD = '' LOGIN_NAME = 'ASAdmin9920@uslbm.us' DISPLAY_NAME = 'Ananda Sankaran' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE ACCOUNTADMIN TO USER ASAdmin9920;
GRANT ROLE SECURITYADMIN TO USER ASAdmin9920;
GRANT ROLE USERADMIN TO USER ASAdmin9920;
GRANT ROLE SYSADMIN TO USER ASAdmin9920;


CREATE or replace USER GSAdminV0050 PASSWORD = '' LOGIN_NAME = 'GSAdminV0050@uslbm.us' DISPLAY_NAME = 'Guna Sekaran' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER GSAdminV0050;
CREATE or replace USER RKAdminV0050 PASSWORD = '' LOGIN_NAME = 'RKAdminV0050@uslbm.us' DISPLAY_NAME = 'Ravi Kumar' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER RKAdminV0050;
CREATE or replace USER CBAdminV0050 PASSWORD = '' LOGIN_NAME = 'CBAdminV0050@uslbm.us' DISPLAY_NAME = 'Chirag Bansal' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER CBAdminV0050;
CREATE or replace USER CBhAdminV0050 PASSWORD = '' LOGIN_NAME = 'CBhAdminV0050@uslbm.us' DISPLAY_NAME = 'Chetan Bhushan Aggarwal' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER CBhAdminV0050;
CREATE or replace USER FSAdminV0050 PASSWORD = '' LOGIN_NAME = 'FSAdminV0050@uslbm.us' DISPLAY_NAME = 'Fortythree Shiaohongtu' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER FSAdminV0050;
CREATE or replace USER MMAdminV0048 PASSWORD = '' LOGIN_NAME = 'MMAdminV0048@uslbm.us' DISPLAY_NAME = 'Meena Muthukaruppan' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER MMAdminV0048;
CREATE or replace USER AMAdminV0050 PASSWORD = '' LOGIN_NAME = 'AMAdminV0050@uslbm.us' DISPLAY_NAME = 'Avnish Mangla' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER AMAdminV0050;
CREATE or replace USER MBAdmin9940 PASSWORD = '' LOGIN_NAME = 'MBAdmin9940@uslbm.us' DISPLAY_NAME = 'Michael Baturin' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER MBAdmin9940;
CREATE or replace USER BpaAdmin9940 PASSWORD = '' LOGIN_NAME = 'BpaAdmin9940@uslbm.us' DISPLAY_NAME = 'Biraja Pattnaik' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER BpaAdmin9940;
CREATE or replace USER MRAdminv0048 PASSWORD = '' LOGIN_NAME = 'MRAdminv0048@uslbm.us' DISPLAY_NAME = 'Muthu Raja' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER MRAdminv0048;
--13/1/2022
use role SecurityAdmin;
CREATE or replace USER nbadmin9940 PASSWORD = '' LOGIN_NAME = 'nbadmin9940@uslbm.us' DISPLAY_NAME = 'Nathan Blanchard ' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER nbadmin9940;
CREATE or replace USER ANAdminKHOJ PASSWORD = '' LOGIN_NAME = 'ANAdminKHOJ@uslbm.us' DISPLAY_NAME = 'Amar Nalubolu ' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER ANAdminKHOJ;
CREATE or replace USER NTAdminKhoj PASSWORD = '' LOGIN_NAME = 'NTAdminKhoj@uslbm.us' DISPLAY_NAME = 'Naveen Tanneeru' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER NTAdminKhoj;
CREATE or replace USER RRAdminKhoj PASSWORD = '' LOGIN_NAME = 'RRAdminKhoj@uslbm.us' DISPLAY_NAME = 'Rajeshwar Reddy' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER RRAdminKhoj;
CREATE or replace USER JRAdmin9940 PASSWORD = '' LOGIN_NAME = 'JRAdmin9940@uslbm.us' DISPLAY_NAME = 'Jacob Ruchotzke' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER JRAdmin9940;

CREATE or replace USER JMAdmin9740 PASSWORD = '' LOGIN_NAME = 'JMAdmin9740@uslbm.us' DISPLAY_NAME = 'Jessica McNamara' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER JMAdmin9740;

CREATE or replace USER MATILLIONDEV PASSWORD = 'Uslbm@123456789' LOGIN_NAME = 'MATILLIONDEV' DISPLAY_NAME = 'Matillion Dev' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER MatillionDev;
CREATE or replace USER MATILLIONQA PASSWORD = 'Uslbm@123456789' LOGIN_NAME = 'MATILLIONQA' DISPLAY_NAME = 'Matillion QA' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER MatillionQA;

CREATE or replace USER  RKhAdminV0050  PASSWORD = '' LOGIN_NAME = 'RKhAdminV0050@uslbm.us' DISPLAY_NAME = 'Rupesh Kumar Khanna' DEFAULT_ROLE = SYSADMIN ; 
GRANT ROLE SYSADMIN TO USER  RKhAdminV0050 ;

CREATE or replace USER DPAdminV0048 PASSWORD = '' LOGIN_NAME = 'DPAdminV0048@uslbm.us' DISPLAY_NAME = 'Dheerendra Pandey' DEFAULT_ROLE = SYSADMIN ;
GRANT ROLE SYSADMIN TO USER DPAdminV0048;

